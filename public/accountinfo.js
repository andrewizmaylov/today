(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{13:function(t,e,a){var s=a(180);"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(4)(s,n);s.locals&&(t.exports=s.locals)},14:function(t,e,a){var s=a(182);"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(4)(s,n);s.locals&&(t.exports=s.locals)},179:function(t,e,a){"use strict";var s=a(13);a.n(s).a},180:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,"\nlabel[data-v-5922e1a4], button[data-v-5922e1a4] {\n\tpadding-left: 12px;\n\tmargin-top: 10px;\n}\n.small[data-v-5922e1a4] {\n\tfont-size: 0.8em;\n\tpadding-left: 12px;\n}\n\n",""])},181:function(t,e,a){"use strict";var s=a(14);a.n(s).a},182:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,"\n.isInvalid[data-v-3953e25c] {\n\tborder: red 1px solid;\n}\n",""])},223:function(t,e,a){"use strict";a.r(e);var s={data:function(){return{form:new Form({}),user_id:""}},methods:{check:function(t){return this.form.errors.has(t)},errorMessage:function(t){return this.form.errors.get(t)},submitForm:function(){var t=this;this.form.submit(this.formMethod,this.formPath).then((function(e){console.log(e.data),t.$router.back()})).catch((function(t){console.log("error.response.data")}))},setForm:function(){var t=this,e="/app/web/sort/of/how/i/will/mess/you/up"+this.$store.getters.path;axios.get(e).then((function(e){e.data.user_id&&(t.user_id=e.data.user_id),t.form=new Form(e.data)})).catch((function(e){401==e.response.status&&t.$router.push("/login")}))}},created:function(){this.setForm()},computed:{formMethod:function(){return this.user_id?"patch":"post"},formBtn:function(){return this.user_id?"Изменить":"Добавить"},formPath:function(){return this.user_id?this.$store.getters.path+"/"+this.user_id:this.$store.getters.path}}},n=(a(179),a(1)),o={name:"account-info",extends:Object(n.a)(s,void 0,void 0,!1,null,"5922e1a4",null).exports,data:function(){return{departments:[],occupations:[],avatar:"",chooseOccupation:!1}},created:function(){var t=this;axios.get("/api/occupation").then((function(e){t.departments=e.data})),this.getAvatar(),this.getOccupation()},computed:{occupationBtn:function(){var t=this;if(this.occupations.length<1)return"  Выберите специальность  ";var e="";return this.occupations.forEach((function(a){t.departments.filter((function(t){t.id===a&&(e=e+t.russian+", ")}))})),"Вы "+e+"верно?"},imageText:function(){return this.user_id?"Выбрать фото профиля":"Загрузить аватар можно после заполнения всех полей формы"}},methods:{getOccupation:function(){var t=this;axios.get("/user/occupation").then((function(e){return t.occupations=e.data}))},changeOccupation:function(){var t=this;axios.post("/user/occupation",this.occupations).then((function(e){t.chooseOccupation=!1})).catch((function(t){console.log(t)}))},changeAvatar:function(){var t=this,e=new FormData;e.append("file",this.$refs.myFiles.files[0]),axios.post("/user/avatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.$router.back()}))},getAvatar:function(){var t=this;axios.get("/user/avatar").then((function(e){e.data?t.avatar="/uploads/avatars/".concat(e.data):t.avatar="/img/face.svg"})).catch((function(t){console.log(t)}))},sendMesage:function(){alert("text me +79778128596")}}},r=(a(181),Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-full h-full bg-gray-800 text-center"},[a("div",{staticClass:"flex flex-col",class:t.chooseOccupation?"hidden":""},[a("div",{staticClass:"flex justify-center mt-16"},[a("form",{attrs:{enctype:"multipart/form-data"}},[a("div",{},[a("label",{attrs:{for:"file"}},[a("img",{staticClass:"h-32 w-32 rounded-full border border-gray-100",attrs:{src:t.avatar,title:this.imageText}})]),t._v(" "),a("input",{ref:"myFiles",staticClass:"hidden",attrs:{id:"file",type:"file",disabled:!this.user_id},on:{change:function(e){return t.changeAvatar()}}})])])]),t._v(" "),a("div",{staticClass:"container mx-auto mt-8 w-2/3 max-w-sm border border-gray-300 rounded text-gray-300"},[a("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)},input:function(e){return t.form.errors.clear(e.target.name)}}},[a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"flex flex-col px-4 mt-2"},[a("label",{staticClass:" text-xs",attrs:{for:"last_name"}},[t._v("Фамилия")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.last_name,expression:"form.last_name"}],staticClass:"text-base text-gray-800 px-2 outline-none border border-gray-300 rounded",class:{isInvalid:t.check("last_name")},attrs:{type:"text",id:"last_name",name:"last_name",placeholder:""},domProps:{value:t.form.last_name},on:{input:function(e){e.target.composing||t.$set(t.form,"last_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"flex flex-col px-4 mt-2"},[a("label",{staticClass:" text-xs",attrs:{for:"first_name"}},[t._v("Имя")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.first_name,expression:"form.first_name"}],staticClass:"text-base text-gray-800 px-2 outline-none border border-gray-300 rounded",class:{isInvalid:t.check("first_name")},attrs:{type:"text",id:"first_name",name:"first_name",placeholder:""},domProps:{value:t.form.first_name},on:{input:function(e){e.target.composing||t.$set(t.form,"first_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"flex flex-col px-4 mt-2"},[a("label",{staticClass:" text-xs",attrs:{for:"second_name"}},[t._v("Отчество")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.second_name,expression:"form.second_name"}],staticClass:"text-base text-gray-800 px-2 outline-none border border-gray-300 rounded",class:{isInvalid:t.check("second_name")},attrs:{type:"text",id:"second_name",name:"second_name",placeholder:""},domProps:{value:t.form.second_name},on:{input:function(e){e.target.composing||t.$set(t.form,"second_name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"flex flex-col px-4 mt-2"},[a("div",{},[a("label",{staticClass:" text-xs",attrs:{for:"birthday"}},[t._v("Дата рождения")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.birthday,expression:"form.birthday"}],staticClass:"w-full text-base text-gray-800 px-2 outline-none border border-gray-300 rounded",class:{isInvalid:t.check("birthday")},attrs:{type:"date",id:"birthday",name:"birthday"},domProps:{value:t.form.birthday},on:{input:function(e){e.target.composing||t.$set(t.form,"birthday",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"flex flex-col mt-1"},[a("label",{staticClass:" text-xs",attrs:{for:"gender"}},[t._v("Пол")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.gender,expression:"form.gender"}],staticClass:"w-full text-base text-gray-800 px-2 py-1 outline-none border border-gray-300 rounded",class:{isInvalid:t.check("gender")},attrs:{id:"gender",name:"gender"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"gender",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:""}},[t._v("Вы...")]),t._v(" "),a("option",{attrs:{value:"male"}},[t._v("Я мужчина")]),t._v(" "),a("option",{attrs:{value:"female"}},[t._v("Я женщина")])])])]),t._v(" "),a("div",{staticClass:"px-4 mt-6 mb-2"},[a("button",{staticClass:"w-full border border-gray-300 px-3 py-2 rounded my-6",attrs:{type:"submit",disabled:t.form.errors.any()}},[t._v(t._s(t.formBtn)+" данные")])])])]),t._v(" "),a("div",{staticClass:"container mx-auto mt-2 py-1 w-2/3 max-w-sm"},[a("button",{staticClass:"w-full border border-white text-gray-300 px-3 py-2 rounded my-6",attrs:{type:"button"},on:{click:function(e){t.chooseOccupation=!0}}},[t._v("\n  \t\t\t\t"+t._s(t.occupationBtn)+"\n\t\t\t")])]),t._v(" "),a("img",{staticClass:"mx-auto mt-16 w-16 h-16 mb-8",attrs:{src:"/img/x-circle-white.svg",alt:"close window"},on:{click:function(e){return t.$router.back()}}})]),t._v(" "),a("div",{staticClass:"flex justify-center py-12",class:t.chooseOccupation?"":"hidden"},[a("div",{staticClass:"w-4/5 max-w-md bg-gray-100 rounded flex flex-col "},[a("div",{staticClass:"flex my-6 items-center px-4"},[a("span",{staticClass:"mr-auto text-left text-sm text-gray-800"},[t._v("Выберите из списка вашу специальность")]),t._v(" "),a("img",{staticClass:"w-8 h-8",attrs:{src:"/img/x-circle.svg",alt:"close window"},on:{click:function(e){t.chooseOccupation=!1}}})]),t._v(" "),a("div",{staticClass:"flex flex-col text-left pl-8"},[a("form",t._l(t.departments,(function(e){return a("div",{},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.occupations,expression:"occupations"}],attrs:{type:"checkbox",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.occupations)?t._i(t.occupations,e.id)>-1:t.occupations},on:{change:function(a){var s=t.occupations,n=a.target,o=!!n.checked;if(Array.isArray(s)){var r=e.id,i=t._i(s,r);n.checked?i<0&&(t.occupations=s.concat([r])):i>-1&&(t.occupations=s.slice(0,i).concat(s.slice(i+1)))}else t.occupations=o}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:e.id}},[t._v(t._s(e.russian))])])})),0)]),t._v(" "),a("div",{staticClass:"text-center my-6",on:{click:t.sendMesage}},[a("span",{staticClass:"text-center text-xs text-gray-800 leading-3"},[t._v("\n\t\t\t\t\tEсли ваша специальность отсутствует в списке, сообщите об этом администрации ресурса\n\t\t\t\t")])]),t._v(" "),a("div",{staticClass:"flex justify-center my-8"},[a("button",{staticClass:"bg-gray-300 rounded px-4 py-2 mx-2 outline-none",attrs:{type:"button"},on:{click:function(e){t.chooseOccupation=!1}}},[t._v("Отмена")]),t._v(" "),a("button",{staticClass:"bg-blue-400 rounded px-3 py-2 mx-2 outline-none",attrs:{type:"button"},on:{click:t.changeOccupation}},[t._v("Изменить")])])])])])}),[],!1,null,"3953e25c",null));e.default=r.exports}}]);